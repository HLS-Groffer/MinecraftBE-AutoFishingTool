# MinecraftBE-AutoFishingTool
  自动钓鱼，解放生产力（大误）
  在一次去下界以后弄丢了好友弄来的附魔弓，而游戏内自动钓鱼装置被更新失效了，故做此蠢事弥补损失。虽然弓找回来了，但是这个蠢蠢的小工具给我钓来好几箱附魔书。

## 写在前面
  我得承认这个东西很凑巧，需要相对严苛的环境，独占的操作，还容易出意外导致钓鱼终止，然而为了解放一下盯着不停右键的痛苦钓鱼操作。<br>
![又不是不能用](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1595955470235&di=022176a7e5d283642446ecca672a93cb&imgtype=0&src=http%3A%2F%2Fbbs-static.smartisan.cn%2Fdata%2Fattachment%2Fforum%2F201811%2F23%2F185450dmavxh9r5ebbn1ez.jpg)<br>
  支持的环境：我只试过 Win10

## 自动钓鱼原理
  通过鼠标附近25个红色通道监测点的平均颜色作为判断，在鱼竿水花溅起的时候自动右键（笑）~~*没错就是这么蠢的思路*~~<br>
  用`pyautogui`进行鼠标操作，`ctypes`提取颜色。<br>
  在放下鱼竿数秒后，进行第一次取样并记作基准平均色a。而后不断取颜色做平均值b并与基准平均色a对比，当颜色差的绝对值大于`sensitivity`时右键鱼竿升起。<br>
  为了实现自动钓鱼做了一些辅助操作，如天暗了以后要修正。当连续20次检测没有超过`sensitivity`时，自动将此刻的平均颜色b赋值给基准平均色a。<br>
  其中有蜜汁bug会导致返回的颜色全部为255，此时自动收勾并自动重启。<br>
  在小工具启动的时候，会自动点击鼠标左键以获得焦点并继续游戏。而后自动右键抛勾。在约100次循环（约半分钟）没有鱼上钩的时候，判断可能没有抛下鱼钩，此时进行一次额外的右键操作以抛下鱼钩。<br>
  钓鱼将自动在200次后停止。不过没错的话你也撑不到自动完成一千次。<br>
  一般在20次左右就会因为返回颜色全部255而重启。所以要默认这个工具会无限运行下去。<br>
**因为30秒重新抛勾机制，电脑不会在钓鱼中断后触发自动休眠。例如命令行挡住了按键，鼠标被碰飞走以后无法重新获得游戏焦点的时候，只能人工干预**<br>
  如果你的电脑不会出255bug，那么将会在`fishingCounter`次后自动结束。改成无限就去把`for fishTimeCount in range(fishingCounter):`那一行改成`While True:`

## 使用方法
- 安装一下外部库……懒人神器→ 自动钓鱼简化环境配置器.cmd
- 不要改变小程序的名字，除非想你自己改自启动代码
- 打开你的MinecraftBE缩放到合适的位置
- 选择安全的水边，走进低头，使得丢下浮标后浮标在鼠标附近100像素之内，而不因为随机浮动出发收勾。最好测试一次抛勾-来鱼-自动钓起循环，方可放心。
- 按动`Esc`，测试在Minecraft失去焦点后，鼠标是否在"继续游戏"按钮上。如果不是，请移动上去。
- 回到钓鱼状态，不用理它了。
注意，在命令行自动启动的时候会改变位置，务必不要让获得焦点的命令行挡住“继续游戏”按钮。
